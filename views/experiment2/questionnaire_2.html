<!--/**
* Copyright (C) 2016 Steven Bartels
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/-->

<!--/**
* @name: Questionnaire 2
* @description: view to display questionnaire after user experienced the second process model
*
* @author: Steven Bartels
*/-->

<!DOCTYPE html>

<html ng-app="pat"> <!-- SCOPE pat -->
<head>
    <meta charset="utf8"/>
    <title>PAT - Process Acceptance Testing</title>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.3.0/knockout-min.js"></script>

    <!-- Style -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
          integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script src="/study_assets/pat/libs/jquery/jquery-3.1.1.min.js"></script>

    <!-- JATOS -->
    <script type="text/javascript" src="/study_assets/pat/libs/jatos/jatos.js"></script>

    <!-- SurveyJS -->
    <script type="text/javascript" src="/study_assets/pat/libs/surveyjs/survey.ko.min.js"></script>

    <!-- AngularJS -->
    <script type="text/javascript" src="/study_assets/pat/libs/angular/angular.js"></script>
    <script type="text/javascript" src="/study_assets/pat/libs/angular/angular-animate.js"></script>
    <script type="text/javascript" src="/study_assets/pat/libs/angular/angular-cookies.js"></script>
    <script type="text/javascript" src="/study_assets/pat/libs/angular/angular-resource.js"></script>
    <script type="text/javascript" src="/study_assets/pat/libs/angular/angular-route.js"></script>
    <script type="text/javascript" src="/study_assets/pat/libs/angular/angular-sanitize.js"></script>

    <!-- 3rd Party -->
    <script type="text/javascript" src="/study_assets/pat/libs/3rdparty/ngBonita.js"></script>
    <script type="text/javascript" src="/study_assets/pat/libs/3rdparty/ngStorage.js"></script>

    <!-- Controller -->
    <script type="text/javascript" src="/study_assets/pat/scripts/controllers/review.controller.js"></script>
    <script type="text/javascript" src="/study_assets/pat/scripts/controllers/review2.controller.js"></script>
    <script type="text/javascript" src="/study_assets/pat/scripts/controllers/submit.controller.js"></script>
    <script type="text/javascript" src="/study_assets/pat/scripts/controllers/submit2.controller.js"></script>
    <script type="text/javascript" src="/study_assets/pat/scripts/controllers/submit3.controller.js"></script>
    <script type="text/javascript" src="/study_assets/pat/scripts/controllers/submit4.controller.js"></script>
    <script type="text/javascript" src="/study_assets/pat/scripts/controllers/submit5.controller.js"></script>
    <script type="text/javascript" src="/study_assets/pat/scripts/controllers/submit6.controller.js"></script>

    <!-- Service/Factory -->
    <script type="text/javascript" src="/study_assets/pat/scripts/services/processDataOp.service.js"></script>

    <!-- Config -->
    <script type="text/javascript" src="/study_assets/pat/scripts/configs/cookie.conf.js"></script>

    <!-- Local -->
    <script type="text/javascript" src="/study_assets/pat/scripts/app.js"></script>
</head>

<body>

<div class="page-header" style="text-align: center">
    <h3>Questionnaire 2</h3>
    <h4>Experiment 2 - Mechanical Turk</h4>
</div>

<!-- Survey -->
<div class="container">
    <div id="SurveyExperiment2"></div>
</div> <!-- end container -->

<script>

    var resultDataInJason;

    jatos.onLoad(function () {
        // survey.js -- displays Q&A and handles user actions, all rows are required
        Survey.Survey.cssType = "bootstrap";
        var survey            = new Survey.Survey(
                {goNextPageAutomatic: true,
                    pages: [{
                        questions: [{
                            type: "radiogroup",
                            choices: [{value: "1", text: "yes"}, {value: "0", text: "no"}],
                            colCount: 0,
                            isRequired: true,
                            name: "affektiv_1",
                            title: "I felt good while executing the charging process."
                        }, {
                            type: "radiogroup",
                            choices: [{value: "1", text: "yes"}, {value: "0", text: "no"}],
                            colCount: 0,
                            isRequired: true,
                            name: "affektiv_2",
                            title: "I felt informed about the charging process."
                        }, {
                            type: "radiogroup",
                            choices: [{value: "1", text: "yes"}, {value: "0", text: "no"}],
                            colCount: 0,
                            isRequired: true,
                            name: "affektiv_3",
                            title: "I felt included into the process."
                        }, {
                            type: "radiogroup",
                            choices: [{value: "1", text: "yes"}, {value: "0", text: "no"}],
                            colCount: 0,
                            isRequired: true,
                            name: "affektiv_4",
                            title: "This travel request is annoying."
                        }, {
                            type: "radiogroup",
                            choices: [{value: "1", text: "yes"}, {value: "0", text: "no"}],
                            colCount: 0,
                            isRequired: true,
                            name: "affektiv_5",
                            title: "This travel request is unpleasant."
                        }, {
                            type: "radiogroup",
                            choices: [{value: "1", text: "yes"}, {value: "0", text: "no"}],
                            colCount: 0,
                            isRequired: true,
                            name: "affektiv_6",
                            title: "I felt insecure."
                        }, {
                            type: "radiogroup",
                            choices: [{value: "1", text: "yes"}, {value: "0", text: "no"}],
                            colCount: 0,
                            isRequired: true,
                            name: "affektiv_7",
                            title: "This travel request is laborious."
                        }, {
                            type: "radiogroup",
                            choices: [{value: "1", text: "yes"}, {value: "0", text: "no"}],
                            colCount: 0,
                            isRequired: true,
                            name: "affektiv_8",
                            title: "This travel request is stressful."
                        }, {
                            type: "radiogroup",
                            choices: [{value: "1", text: "yes"}, {value: "0", text: "no"}],
                            colCount: 0,
                            isRequired: true,
                            name: "affektiv_9",
                            title: "I felt informed about the charging process."
                        }, {
                            type: "radiogroup",
                            choices: [{value: "1", text: "yes"}, {value: "0", text: "no"}],
                            colCount: 0,
                            isRequired: true,
                            name: "affektiv_10",
                            title: "I got angry."
                        }], title: "What did you feel during the process?"
                    }, {
                        name: "[Page 2]",
                        questions: [{
                            type: "radiogroup",
                            choices: [{value: "1", text: "yes"}, {value: "0", text: "no"}],
                            colCount: 0,
                            isRequired: true,
                            name: "kognitiv_1",
                            title: "I think this travel request is useful."
                        }, {
                            type: "radiogroup",
                            choices: [{value: "1", text: "yes"}, {value: "0", text: "no"}],
                            colCount: 0,
                            isRequired: true,
                            name: "kognitiv_2",
                            title: "This travel request is complicated."
                        }, {
                            type: "radiogroup",
                            choices: [{value: "1", text: "yes"}, {value: "0", text: "no"}],
                            colCount: 0,
                            isRequired: true,
                            name: "kognitiv_3",
                            title: "Executing this travel request takes time."
                        }, {
                            type: "radiogroup",
                            choices: [{value: "1", text: "yes"}, {value: "0", text: "no"}],
                            colCount: 0,
                            isRequired: true,
                            name: "kognitiv_4",
                            title: "This travel request is reasonable."
                        }, {
                            type: "radiogroup",
                            choices: [{value: "1", text: "yes"}, {value: "0", text: "no"}],
                            colCount: 0,
                            isRequired: true,
                            name: "kognitiv_5",
                            title: "I think this travel request is important."
                        }, {
                            type: "radiogroup",
                            choices: [{value: "1", text: "yes"}, {value: "0", text: "no"}],
                            colCount: 0,
                            isRequired: true,
                            name: "kognitiv_6",
                            title: "This travel request is cumbersome."
                        }, {
                            type: "radiogroup",
                            choices: [{value: "1", text: "yes"}, {value: "0", text: "no"}],
                            colCount: 0,
                            isRequired: true,
                            name: "kognitiv_7",
                            title: "I am satisfied with the results."
                        }],
                        title: "What did you think during the process?"
                    }, {
                        name: "[Page 3]",
                        questions: [{
                            type: "radiogroup",
                            choices: [{value: "1", text: "yes"}, {value: "0", text: "no"}],
                            colCount: 0,
                            isRequired: true,
                            name: "konativ_1",
                            title: "I would like to keep this travel request."
                        }, {
                            type: "radiogroup",
                            choices: [{value: "1", text: "yes"}, {value: "0", text: "no"}],
                            colCount: 0,
                            isRequired: true,
                            name: "konativ_2",
                            title: "I would suggest an improvement."
                        }, {
                            type: "radiogroup",
                            choices: [{value: "1", text: "yes"}, {value: "0", text: "no"}],
                            colCount: 0,
                            isRequired: true,
                            name: "konativ_3",
                            title: "I would like to execute this process again."
                        }, {
                            type: "radiogroup",
                            choices: [{value: "1", text: "yes"}, {value: "0", text: "no"}],
                            colCount: 0,
                            isRequired: true,
                            name: "konativ_4",
                            title: "I would like to delegate the charging task."
                        }, {
                            type: "radiogroup",
                            choices: [{value: "1", text: "yes"}, {value: "0", text: "no"}],
                            colCount: 0,
                            isRequired: true,
                            name: "konativ_5",
                            title: "I would like to get rid of this travel request."
                        }, {
                            type: "radiogroup",
                            choices: [{value: "1", text: "yes"}, {value: "0", text: "no"}],
                            colCount: 0,
                            isRequired: true,
                            name: "konativ_7",
                            title: "I would like to complain about the travel request."
                        }, {
                            type: "radiogroup",
                            choices: [{value: "1", text: "yes"}, {value: "0", text: "no"}],
                            colCount: 0,
                            isRequired: true,
                            name: "konativ_8",
                            title: "I would prefer a different travel request."
                        }],
                        title: "What do you think about executing the process again?"
                    }],
                    showNavigationButtons: false,
                    showProgressBar: "bottom"
                });
        // handle the data after survey has been filled out
        survey.onComplete.add(function (s) {
            resultDataInJason = JSON.stringify(s.data);

            // test output
            // console.log("The results are:" + JSON.stringify(s.data));
        });
        survey.render("SurveyExperiment2");

        // by clicking on next button, the results will be sent to jatos and next component starts
        $("#nextButton").click(function () {
            // Send back some result data to JATOS
            console.log("The results are:" + resultDataInJason);

            jatos.submitResultData(resultDataInJason, jatos.startNextComponent);
        });
    });
</script>

<hr>

<div class="form-group pull-right">
    <div class="col-sm-offset-2 col-sm-10">
        <button type="submit" id="nextButton" class="btn btn-primary">Next step</button>
    </div>
</div>

</body>
</html> <!-- SCOPE END pat-->